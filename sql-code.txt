CREATE TABLE Users(
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    role VARCHAR NOT NULL,
    user_name VARCHAR NOT NULL UNIQUE,
    password VARCHAR NOT NULL,
    registration_date TIMESTAMP NOT NULL
);

CREATE TABLE Accounts(
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES Users(id) ON DELETE RESTRICT,
    balance DECIMAL(20, 2) DEFAULT 0.00,
    currency VARCHAR(3) NOT NULL
);

CREATE TABLE Transactions(
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    from_account_id UUID NOT NULL REFERENCES Accounts(id),
    to_account_id UUID NOT NULL REFERENCES Accounts(id),
    amount DECIMAL(20, 2) NOT NULL,
    date TIMESTAMP NOT NULL,
    currency VARCHAR(3) NOT NULL
);

drop table Users;
drop table Accounts;